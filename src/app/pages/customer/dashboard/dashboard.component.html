<div class="tm-content-area">

  <div class="tm-content-area-panel-table">
    <!-- Table Title & Button -->
    <div class="d-flex justify-content-between align-items-center tm-content-area-panel-table-title">
      <h4>All Parking List</h4>

    </div>
    <app-filter-data (changeFilter)="changeFilter($event)" [showSlot]="false"></app-filter-data>

    <!-- Table -->
    <div class="table-responsive tm-parking-revenue-panel-table tm-all-parking-list-table">
      <table class="table align-middle table-striped table-borderless">
        <thead class="">
          <tr>
            <th>ID</th>
            <th>Booking Type</th>
            <th>Vehicle Number</th>
            <th>In Time</th>
            <th>Exit Time</th>
            <th>Vehicle Type</th>
            <th>Parking Slots</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          @if (bookings.length>0) { @for (item of bookings; track $index) {
          <tr>
            <td>#{{item?.code}}</td>
            <td>#{{item?.booking_type | titlecase}}</td>
            <td>{{item?.billing?.vehicle_number}}</td>
            @if(item?.booking_type=='hourly')
            {
            <td>{{item?.booking_start | date:'dd MMM, hh:mm a'}}</td>
            <td>{{item?.booking_end | date:'dd MMM, hh:mm a'}}</td>
            }
            @else{
            <td>{{item?.booking_start | date:'EEEE d MMMM yyyy'}}</td>
            <td>{{item?.booking_end | date:'EEEE d MMMM yyyy'}}</td>
            }

            <td>{{item?.billing?.carType?.name}}</td>
            <td>{{item?.parking_slot?.slot_code}}</td>
            <td>

              <button class="btn" (click)="viewBooking(item?.id)">
                <img src="assets/img/eye-icon.svg" alt="" class="img-fluid" />
              </button>
            </td>
          </tr>
          }
          }@else {
          <tr>
            <td colspan="7" class="text-center">No booking(s) Found</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
    <!-- Pagination -->
    <div class="tm-parking-revenue-panel-table-pagination">
      <nav>
        @if (bookings.length>0) {
        <ngb-pagination class="pagination justify-content-center" [collectionSize]="collectionSize" [(page)]="page"
          [pageSize]="per_page" [maxSize]="5" [rotate]="true" [ellipses]="false" [boundaryLinks]="true"
          (pageChange)="onPageChange($event)" firstText="⏮" previousText="◀" nextText="▶" lastText="⏭" />
        }
      </nav>
    </div>
  </div>
</div>

<ng-template #booking_detail let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Booking</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <app-booking-detail [id]="bookingID"></app-booking-detail>
  </div>
</ng-template>
